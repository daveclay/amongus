{"version":3,"sources":["selectors/selectors.js","utils.js","redux/actions.js","redux/utils/redux-map.js","redux/mutators.js","redux/reducers.js","redux/store.js","components/Notify.js","components/Header.js","components/Player.js","components/Task.js","components/EmergencyMeetingButton.js","components/Room.js","components/Rooms.js","components/App.js","index.js"],"names":["getPlayersInRoom","players","room","playerNames","map","name","getPlayerByName","find","player","getCurrentTurnPlayer","state","currentTurnPlayerIndex","getCurrentTurnPlayerName","currentTurnPlayer","isCurrentTurnPlayer","getRoomForPlayer","rooms","isPlayerInRoom","includes","isCurrentTurnPlayerInRoom","currentTurnPlayerRoom","isCurrentTurnPlayerAbleToSelectRoom","gameOver","emergencyMeetingStarted","human","isEmergencyButtonEnabled","emergencyButton","getTaskForRoom","tasks","task","id","taskId","getTaskById","isCurrentTurnPlayerAbleToSelectTask","getRoomForTask","playerName","completed","isCurrentTurnPlayerHumanAndInRoom","getNextPlayerTurnIndex","nextIndex","length","sortByVote","a","b","ArrayUtils","clone","array","allExcept","item","filter","pluckRandom","splice","sampleIndex","Math","floor","random","sample","reduceAll","reducers","reduce","newState","reducer","mutatorToReducer","mutator","oldState","action","produce","updatePlayerName","type","addHumanPlayer","dispatch","getState","addPlayerForm","alert","addComputerPlayer","startGame","dispatchNextTurn","onRoomSelected","roomName","onTaskSelected","onEmergencyMeetingSelected","skipVote","voteImposter","Promise","continueGame","lastVotingPlayerIndex","emergencyMeetingInitiatedByPlayerIndex","isEmergencyMeetingFinished","voteResults","sortedTallies","Object","entries","voteTalliesByPlayer","sort","mostVotedPlayerTally","secondMostVotedPlayerTally","mostVoted","votes","secondMostVoted","buildResult","results","victory","tie","imposterPlayerName","getEmergencyMeetingVoteResults","votedOffImposter","votedTie","voteFailed","setTimeout","then","computerPlayersEnabled","doComputerPlayer","getAvailableComputerActions","computerPlayerVote","computerActions","randomRoom","currentPlayer","reducerMap","this","actionsToReducers","initialState","actionFn","actionName","startState","getReducersForAction","console","log","movePlayersToCafeteria","forEach","movePlayerToRoom","leaveCurrentRoom","newRoom","getRoomByName","playerNameToRemove","finishCurrentTurnPlayerTask","isPlayerPerformingTask","isImposter","isOnlyPlayerInRoom","compelted","description","startEmergencyMeeting","abandonAllTasks","resetVoteTallies","notify","message","className","addPlayer","image","availablePlayerImages","addPlayerMutator","resetAvailableComputerPlayers","resetAvailablePlayerImages","resetCurrentTurnPlayerIndex","pickImposter","moveCurrentPlayerToRoom","assignPlayerToTask","showCurrentPlayerNotification","startEmergencyMeetingMutator","voteImposterMutator","availableComputerPlayers","computerPlayers","playerImages","rootReducer","middlewareEnhancer","applyMiddleware","thunkMiddleware","store","createStore","composeWithDevTools","connect","placeholder","value","onKeyUp","e","code","onChange","target","onClick","ownProps","celebrate","isCurrentTurn","votingEnabled","src","currentTurnPlayerAbleToPerformTask","stopPropagation","emergencyMeetingButtonEnabled","disabled","currentTurnPlayerAbleToSelectRoom","App","rootElement","document","getElementById","ReactDOM","render","steps","currentStepIndex","intervalId","setInterval","clearInterval"],"mappings":"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","file":"static/js/main.04325a9b.chunk.js","sourcesContent":["/************************************************\n * Selectors\n ************************************************/\nexport const getPlayersInRoom = (players, room) => room.playerNames.map(name => getPlayerByName(players, name))\nexport const getPlayerByName = (players, name) => players.find(player => player.name === name)\nexport const getCurrentTurnPlayer = (state) => state.players[state.currentTurnPlayerIndex]\nexport const getCurrentTurnPlayerName = (state) => {\n  let currentTurnPlayer = getCurrentTurnPlayer(state)\n  if (currentTurnPlayer) {\n    return currentTurnPlayer.name\n  } else {\n    return null;\n  }\n}\nexport const isCurrentTurnPlayer = (state, player) => getCurrentTurnPlayerName(state) === player.name\nexport const getRoomForPlayer = (state, player) => {\n  return state.rooms.find(room => isPlayerInRoom(room, player))\n}\nexport const isPlayerInRoom = (room, player) => room.playerNames.includes(player.name)\nexport const isCurrentTurnPlayerInRoom = (state, room) => {\n  let currentTurnPlayer = getCurrentTurnPlayer(state)\n  if (currentTurnPlayer) {\n    let currentTurnPlayerRoom = getRoomForPlayer(state, currentTurnPlayer)\n    return currentTurnPlayerRoom && currentTurnPlayerRoom.name === room.name\n  } else {\n    return false\n  }\n}\nexport const isCurrentTurnPlayerAbleToSelectRoom = (state, room) => {\n  let currentTurnPlayer = getCurrentTurnPlayer(state);\n  return currentTurnPlayer &&\n      !isCurrentTurnPlayerInRoom(state, room) &&\n      !state.gameOver &&\n      !state.emergencyMeetingStarted &&\n      currentTurnPlayer.human\n}\nexport const isEmergencyButtonEnabled = state => {\n  let currentTurnPlayer = getCurrentTurnPlayer(state);\n  if (currentTurnPlayer) {\n    let room = getRoomForPlayer(state, currentTurnPlayer)\n    return currentTurnPlayer &&\n        currentTurnPlayer.human &&\n        !state.gameOver &&\n        room.emergencyButton\n  } else {\n    return false\n  }\n}\nexport const getTaskForRoom = (state, room) => state.tasks.find(task => task.id === room.taskId)\nexport const getTaskById = (state, id) => state.tasks.find(task => task.id === id)\nexport const isCurrentTurnPlayerAbleToSelectTask = (state, task) => {\n  let room = getRoomForTask(state, task)\n  return isCurrentTurnPlayerInRoom(state, room) &&\n      task.playerName == null &&\n      !state.gameOver &&\n      !state.emergencyMeetingStarted &&\n      !task.completed &&\n      getCurrentTurnPlayer(state).human\n}\nexport const isPlayerPerformingTask = (player, task) => task.playerName === player.name\nexport const isCurrentTurnPlayerHumanAndInRoom = (state, room) => {\n  return isCurrentTurnPlayerInRoom(state, room) && getCurrentTurnPlayer(state).human\n}\nexport const isImposter = (state, player) => state.imposterPlayerName === player.name\nexport const isOnlyPlayerInRoom = (room, player) => room.playerNames.length === 1 && room.playerNames[0] === player.name\nexport const getRoomForTask = (state, task) => state.rooms.find(room => room.taskId === task.id)\nexport const getRoomByName = (state, roomName) => state.rooms.find(room => room.name === roomName)\nexport const getNextPlayerTurnIndex = (state) => {\n  let nextIndex = state.currentTurnPlayerIndex + 1\n  if (state.players.length === nextIndex) {\n    return 0;\n  } else {\n    return nextIndex;\n  }\n}\nexport const isAllTasksComplete = state => state.tasks.filter(task => !task.completed).length === 0\n\nexport const isEmergencyMeetingFinished = state => {\n  if (!state.emergencyMeetingStarted) {\n    return\n  }\n  let lastVotingPlayerIndex = state.emergencyMeetingInitiatedByPlayerIndex - 1\n  if (lastVotingPlayerIndex < 0) {\n    lastVotingPlayerIndex = state.players.length - 1\n  }\n  return state.currentTurnPlayerIndex === lastVotingPlayerIndex\n}\n\nconst sortByVote = (a, b) => a[1] > b[1] ? -1 : 1\n\nexport const getEmergencyMeetingVoteResults = state => {\n  const sortedTallies = Object.entries(state.voteTalliesByPlayer).sort(sortByVote)\n  const mostVotedPlayerTally = sortedTallies[0]\n  const secondMostVotedPlayerTally = sortedTallies[1]\n\n  const mostVoted = {\n    playerName: mostVotedPlayerTally[0],\n    votes: mostVotedPlayerTally[1]\n  }\n\n  const secondMostVoted = {\n    playerName: secondMostVotedPlayerTally[0],\n    votes: secondMostVotedPlayerTally[1]\n  }\n\n  const buildResult = results => ({\n    mostVoted,\n    secondMostVoted,\n    results\n  })\n\n  if (mostVoted.votes === secondMostVoted.votes) {\n    return buildResult({\n      victory: false,\n      tie: true\n    })\n  } else if (mostVoted.playerName === state.imposterPlayerName) {\n    return buildResult({\n      victory: true\n    })\n  } else {\n    return buildResult({\n      victory: false\n    })\n  }\n}\n","import produce from \"immer\";\n\nexport const ArrayUtils = {\n  clone: function(array) {\n    return [...array];\n  },\n  allExcept: function(array, item) {\n    return array.filter(a => a !== item)\n  },\n  pluckRandom: function(array) {\n    if (array.length === 0) {\n      return null\n    }\n    return array.splice(ArrayUtils.sampleIndex(array), 1)[0];\n  },\n  sampleIndex: function(array) {\n    return Math.floor(Math.random() * array.length);\n  },\n  sample: (array) => {\n    return array[ArrayUtils.sampleIndex(array)];\n  }\n}\n\nexport const reduceAll = (state, ...reducers) => {\n  return reducers.reduce((newState, reducer) => reducer(newState), state)\n}\n\nexport const mutatorToReducer = (mutator) => (oldState, action) => produce(oldState, newState => mutator(newState, action))\n\nexport const newFromTemplate = (template) => {\n  let element = template.cloneNode(true);\n  element.classList.remove(\"hidden\");\n  element.attributes.removeNamedItem(\"id\");\n  return element;\n};\n\n","import {\n  getCurrentTurnPlayer,\n  getEmergencyMeetingVoteResults, getPlayerByName,\n  getRoomForPlayer,\n  getTaskForRoom,\n  isAllTasksComplete,\n  isEmergencyMeetingFinished\n} from \"../selectors/selectors\";\nimport {ArrayUtils} from \"../utils\";\n\nexport const init = () => ({\n  type: 'init'\n})\nexport const updatePlayerName = (name) => ({\n  type: 'updatePlayerName',\n  name: name\n})\n\nexport const addHumanPlayer = () => (dispatch, getState) => {\n  const state = getState()\n  if (getPlayerByName(state.players, state.addPlayerForm.name) != null) {\n    alert(`There's already a player named ${state.addPlayerForm.name}`)\n  } else {\n    dispatch({\n      type: 'addHumanPlayer',\n      player: {\n        human: true\n      }\n    })\n  }\n}\n\nexport const addComputerPlayer = () => ({\n  type: 'addComputerPlayer',\n  player: {\n    human: false\n  }\n})\nexport const nextPlayerTurn = () => ({\n  type: 'nextPlayerTurn'\n})\nexport const startGame = () => (dispatch, getState) => {\n  dispatch({\n    type: 'startGame'\n  })\n  dispatchNextTurn(dispatch, getState)\n}\nexport const enableComputerPlayers = () => ({\n  type: 'enableComputerPlayers'\n})\nexport const onRoomSelected = (roomName) => (dispatch, getState) => {\n  dispatch({\n    type: 'onRoomSelected',\n    roomName\n  })\n  dispatchNextTurn(dispatch, getState)\n}\nexport const onTaskSelected = (taskId) => (dispatch, getState) => {\n  dispatch({\n    type: 'onTaskSelected',\n    taskId\n  })\n  dispatchNextTurn(dispatch, getState)\n}\nexport const onEmergencyMeetingSelected = () => ({\n  type: 'onEmergencyMeetingSelected'\n})\n\nexport const skipVote = () => (dispatch, getState) => {\n  dispatchNextTurn(dispatch, getState)\n}\n\nexport const voteImposter = (playerName) => (dispatch, getState) => {\n  dispatch({\n    type: 'voteImposter',\n    playerName\n  })\n  dispatchNextTurn(dispatch, getState)\n}\n\nexport const votedOffImposter = (voteResults) => ({\n  type: 'votedOffImposter',\n  voteResults\n})\n\nexport const votedTie = (voteResults) => ({\n  type: 'votedTie',\n  voteResults\n})\n\nexport const voteFailed = (voteResults) => ({\n  type: 'voteFailed',\n  voteResults\n})\n\nexport const emergencyMeetingFinished = () => ({\n  type: 'emergencyMeetingFinished'\n})\n\nexport const allTasksCompleted = () => ({\n  type: 'allTasksCompleted'\n})\n\n/************************************************\n * Helpers/Shared Actions\n ************************************************/\nconst dispatchNextTurn = (dispatch, getState) => {\n  const continueGamePromise = new Promise(continueGame => {\n    if (isEmergencyMeetingFinished(getState())) {\n      const voteResults = getEmergencyMeetingVoteResults(getState())\n      if (voteResults.results.victory) {\n        dispatch(votedOffImposter(voteResults))\n      } else {\n        if (voteResults.results.tie) {\n          dispatch(votedTie(voteResults))\n        } else {\n          dispatch(voteFailed(voteResults))\n        }\n        // Give time for the players to see the results of the vote before continuing on\n        setTimeout(() => continueGame(), 3000)\n      }\n      dispatch(emergencyMeetingFinished())\n    } else if (isAllTasksComplete(getState())) {\n      dispatch(allTasksCompleted())\n    } else {\n      // just another turn - continue on immediately\n      continueGame()\n    }\n  })\n\n  continueGamePromise.then(() => {\n    dispatch(nextPlayerTurn())\n    const state = getState()\n    const player = getCurrentTurnPlayer(state)\n    if (!player.human && state.computerPlayersEnabled) {\n      doComputerPlayer(dispatch, getState)\n    }\n  })\n}\n\nconst doComputerPlayer = (dispatch, getState) => {\n  setTimeout(() => {\n    const action = ArrayUtils.sample(getAvailableComputerActions(getState))\n    dispatch(action)\n  }, 200)\n}\n\nconst getAvailableComputerActions = (getState) => {\n  const state = getState()\n  if (state.emergencyMeetingStarted) {\n    return [computerPlayerVote]\n  } else {\n    return computerActions\n  }\n}\n\nconst computerPlayerVote = (dispatch, getState) => {\n  const state = getState()\n  // TODO: make a better guess\n  if (Math.random() > .5) {\n    dispatch(voteImposter(ArrayUtils.sample(state.players).name))\n  } else {\n    dispatch(skipVote())\n  }\n}\n\nconst moveToRandomRoom = (dispatch, getState) => {\n  const state = getState()\n  const randomRoom = ArrayUtils.sample(state.rooms)\n  dispatch(onRoomSelected(randomRoom.name))\n}\n\nconst performCurrentRoomTask = (dispatch, getState) => {\n  const state = getState()\n  const currentPlayer = getCurrentTurnPlayer(state)\n  const room = getRoomForPlayer(state, currentPlayer)\n  const task = getTaskForRoom(state, room)\n  dispatch(onTaskSelected(task.id))\n}\n\nconst computerActions = [\n  moveToRandomRoom,\n  performCurrentRoomTask\n]\n\n","export class ReducerMap {\n  constructor() {\n    this.actionsToReducers = {}\n    this.initialState = {}\n  }\n\n  map(actionFn, reducer) {\n    let actionName = (typeof actionFn === 'function') ? actionFn.name : actionFn\n    if (!this.actionsToReducers[actionName]) {\n      this.actionsToReducers[actionName] = [];\n    }\n    let reducers = this.actionsToReducers[actionName];\n    reducers[reducers.length] = reducer;\n  }\n\n  reduce(startState, action) {\n    return this.getReducersForAction(action).reduce((state, reducer) =>\n        reducer(state, action), startState);\n  }\n\n  getReducersForAction(action) {\n    let type = action.type;\n    let reducers = this.actionsToReducers[type];\n    if (reducers) {\n      return reducers;\n    } else {\n      console.log(`No reducer found for ${type}`)\n      return [];\n    }\n  }\n}\n\nconst reducerMap = new ReducerMap();\n\nexport const map = (actionFn, reducer) => {\n  reducerMap.map(actionFn, reducer);\n}\n\nexport function reducer(state = reducerMap.initialState, action) {\n  return reducerMap.reduce(state, action);\n}\n\n","import {\n  ArrayUtils\n} from \"../utils\";\nimport {\n  getCurrentTurnPlayer, getRoomForPlayer,\n  getRoomByName, getTaskById, isPlayerPerformingTask, isImposter, isOnlyPlayerInRoom\n} from \"../selectors/selectors\";\n\n/************************************************\n * Mutators\n ************************************************/\nexport const resetGame = state => {\n  state.gameOver = false\n  state.victory = false\n}\nexport const addPlayer = (state, action) => {\n  if (state.addPlayerForm.name.length === 0)  {\n    return state;\n  }\n  let player = {\n    ...action.player,\n    name: state.addPlayerForm.name,\n    image: ArrayUtils.pluckRandom(state.availablePlayerImages),\n  }\n  state.players[state.players.length] = player\n  movePlayerToRoom(state, player, \"Cafeteria\")\n  state.addPlayerForm.name = \"\"\n}\n\nexport const movePlayersToCafeteria = state => {\n  state.rooms.forEach(room => room.playerNames = []);\n  state.players.forEach(player => movePlayerToRoom(state, player, \"Cafeteria\"))\n}\n\nexport const movePlayerToRoom = (state, player, roomName) => {\n  leaveCurrentRoom(state, player.name)\n  let newRoom = getRoomByName(state, roomName);\n  newRoom.playerNames[newRoom.playerNames.length] = player.name\n}\n\nexport const moveCurrentPlayerToRoom = (state, roomName) => {\n  let currentTurnPlayer = getCurrentTurnPlayer(state)\n  if (currentTurnPlayer) {\n    movePlayerToRoom(state, currentTurnPlayer, roomName)\n  }\n}\n\nexport const leaveCurrentRoom = (state, playerNameToRemove) => {\n  state.rooms.forEach(room => {\n    room.playerNames = ArrayUtils.allExcept(room.playerNames, playerNameToRemove);\n  })\n}\n\nexport const assignPlayerToTask = (state, taskId) => {\n  let currentTurnPlayer = getCurrentTurnPlayer(state)\n  let currentTurnPlayerRoom = getRoomForPlayer(state, currentTurnPlayer)\n  if (taskId === currentTurnPlayerRoom.taskId) {\n    let task = getTaskById(state, taskId)\n    task.playerName = currentTurnPlayer.name\n  }\n}\n\nexport const finishCurrentTurnPlayerTask = state => {\n  let currentTurnPlayer = getCurrentTurnPlayer(state)\n  let room = getRoomForPlayer(state, currentTurnPlayer)\n  let task = getTaskById(state, room.taskId)\n  if (isPlayerPerformingTask(currentTurnPlayer, task)) {\n    if (isImposter(state, currentTurnPlayer)) {\n      if (isOnlyPlayerInRoom(room, currentTurnPlayer)) {\n        console.log(`${currentTurnPlayer.name} sabotaged ${task.description}`)\n        task.completed = false\n      } else {\n        // TODO: don't _always_ complete it\n        task.compelted = true\n      }\n    } else {\n      // TODO: don't _always_ complete it\n      task.completed = true\n    }\n\n    task.playerName = null\n  }\n}\n\nconst abandonAllTasks = state => {\n  state.tasks.forEach(task => task.playerName = null)\n}\n\nexport const startEmergencyMeeting = state => {\n  movePlayersToCafeteria(state)\n  abandonAllTasks(state)\n  state.emergencyMeetingStarted = true\n  state.emergencyMeetingInitiatedByPlayerIndex = state.currentTurnPlayerIndex\n  resetVoteTallies(state)\n  state.notify = {\n    message: \"Emergency Meeting!\",\n    className: \"emergencyMeeting\"\n  }\n}\n\nconst resetVoteTallies = state => {\n  state.players.forEach(player => state.voteTalliesByPlayer[player.name] = 0)\n}\n\nexport const voteImposter = (state, playerName) => {\n  state.voteTalliesByPlayer[playerName] += 1\n}\n\n\n","import * as actions from \"./actions\"\nimport { map, reducer } from \"./utils/redux-map\";\nimport { mutatorToReducer, ArrayUtils, reduceAll } from \"../utils\";\nimport {\n  addPlayer as addPlayerMutator,\n  startEmergencyMeeting as startEmergencyMeetingMutator,\n  voteImposter as voteImposterMutator,\n  assignPlayerToTask, finishCurrentTurnPlayerTask,\n  moveCurrentPlayerToRoom,\n  movePlayersToCafeteria,\n} from \"./mutators\"\nimport {\n  getCurrentTurnPlayerName,\n  getNextPlayerTurnIndex\n} from \"../selectors/selectors\"\n\nexport const initialState = {\n  gameOver: false,\n  notify: {\n    message: null\n  },\n  computerPlayersEnabled: false,\n  currentTurnPlayerIndex: -1,\n  emergencyMeetingStarted: false,\n  emergencyMeetingInitiatedByPlayerIndex: null,\n  voteTalliesByPlayer: {},\n  computerPlayers: [\n    \"Funk\",\n    \"Foo\",\n    \"Grandpop\",\n    \"Grandma\",\n    \"Preston\",\n    \"Mouth\",\n    \"Crayon\"\n  ],\n  availableComputerPlayers: [],\n  playerImages: [\n    \"blue\",\n    \"darkgreen\",\n\t\t\"green\",\n\t\t\"lightblue\",\n\t\t\"orange\",\n\t\t\"pink\",\n\t\t\"red\",\n\t\t\"white\"\n  ],\n  availablePlayerImages: [],\n  addPlayerForm: {\n    name: \"\",\n  },\n  players: [],\n  tasks: [\n    {\n      id: 1,\n      description: \"Fix wiring\",\n      completed: false,\n      playerName: null\n    },\n    {\n      id: 2,\n      description: \"Unlock manifolds\",\n      completed: false,\n      playerName: null\n    },\n    {\n      id: 3,\n      description: \"Swipe card\",\n      completed: false,\n      playerName: null\n    },\n    {\n      id: 4,\n      description: \"Stabilize steering\",\n      completed: false,\n      playerName: null\n    },\n    {\n      id: 5,\n      description: \"Destroy asteroids\",\n      completed: false,\n      playerName: null\n    },\n    {\n      id: 6,\n      description: \"Fill the fuel tank\",\n      completed: false,\n      playerName: null\n    }\n  ],\n  rooms: [\n    {\n      name: \"Cafeteria\",\n      taskId: 1,\n      playerNames: [],\n      emergencyButton: true\n    },\n    {\n      name: \"Reactor\",\n      taskId: 2,\n      playerNames: [],\n    },\n    {\n      name: \"Admin\",\n      taskId: 3,\n      playerNames: [],\n    },\n    {\n      name: \"Navigation\",\n      taskId: 4,\n      playerNames: [],\n    },\n    {\n      name: \"Weapons\",\n      taskId: 5,\n      playerNames: [],\n    },\n    {\n      name: \"Engine\",\n      taskId: 6,\n      playerNames: [],\n    },\n  ]\n}\n\nconst updatePlayerName = (state, action) => {\n  return {\n    ...state,\n    addPlayerForm: {\n      name: action.name\n    }\n  }\n}\n\nconst addPlayer = (state, action) => reduceAll(state,\n  mutatorToReducer(state => addPlayerMutator(state, action))\n)\n\nconst init = state => reduceAll(state,\n  resetAvailableComputerPlayers,\n  resetAvailablePlayerImages,\n)\n\nconst startGame = state => reduceAll(state,\n  state => ({\n    ...state,\n    gameOver: false,\n    victory: false\n  }),\n  resetCurrentTurnPlayerIndex,\n  pickImposter,\n  mutatorToReducer(movePlayersToCafeteria),\n)\n\nconst selectRoom = (state, action) => reduceAll(state,\n  mutatorToReducer(state => moveCurrentPlayerToRoom(state, action.roomName)),\n)\n\nconst selectTask = (state, action) => reduceAll(state,\n  mutatorToReducer(newState => assignPlayerToTask(newState, action.taskId)),\n)\n\nconst nextPlayerTurn = state => reduceAll(state,\n  (state) => ({\n     ...state,\n     currentTurnPlayerIndex: getNextPlayerTurnIndex(state)\n   }),\n   mutatorToReducer(finishCurrentTurnPlayerTask),\n   showCurrentPlayerNotification\n)\n\nconst enableComputerPlayers = state => ({\n  ...state,\n  computerPlayersEnabled: true,\n})\n\nconst startEmergencyMeeting = state => reduceAll(state,\n  mutatorToReducer(startEmergencyMeetingMutator))\n\nconst voteImposter = (state, action) => reduceAll(state,\n  mutatorToReducer(state => voteImposterMutator(state, action.playerName))\n)\n\nconst votedOffImposter = (state, action) => ({\n  ...state,\n  gameOver: true,\n  notify: {\n    message: `Victory! ${action.voteResults.mostVoted.playerName} was the imposter!`,\n    className: \"victory\"\n  }\n})\nconst votedTie = state => ({\n  ...state,\n  notify: {\n    message: \"Tie! No one was ejected.\",\n    className: \"alert\"\n  }\n})\nconst voteFailed = (state, action) => ({\n  ...state,\n  notify: {\n    message: `${action.voteResults.mostVoted.playerName} was NOT the imposter!`,\n    className: \"alert\"\n  }\n})\n\nconst emergencyMeetingFinished = state => ({\n  ...state,\n  emergencyMeetingStarted: false,\n  emergencyMeetingInitiatedByPlayerIndex: null\n})\n\nconst allTasksCompleted = state => ({\n  ...state,\n  gameOver: true,\n  notify: {\n    message: \"All tasks were completed! The Crewmates Win!\",\n    className: \"victory\"\n  }\n})\n\nmap('init', init)\nmap('startGame', startGame)\nmap('enableComputerPlayers', enableComputerPlayers)\nmap('updatePlayerName', updatePlayerName)\nmap('addHumanPlayer', addPlayer)\nmap('addComputerPlayer', addPlayer)\nmap('onRoomSelected', selectRoom)\nmap('onTaskSelected', selectTask)\nmap('nextPlayerTurn', nextPlayerTurn)\nmap('onEmergencyMeetingSelected', startEmergencyMeeting)\nmap('voteImposter', voteImposter)\nmap('votedOffImposter', votedOffImposter)\nmap('votedTie', votedTie)\nmap('voteFailed', voteFailed)\nmap('emergencyMeetingFinished', emergencyMeetingFinished)\nmap('allTasksCompleted', allTasksCompleted)\n\n/************************************************\n * Other Reducers, Helpers, and Shared Reducer Methods\n ************************************************/\nconst pickImposter = state => ({\n  ...state,\n  imposterPlayerName: ArrayUtils.sample(state.players).name\n})\n\nconst resetCurrentTurnPlayerIndex = state => ({\n  ...state,\n  currentTurnPlayerIndex: -1\n})\n\nconst resetAvailableComputerPlayers = state => ({\n  ...state,\n  availableComputerPlayers: ArrayUtils.clone(state.computerPlayers)\n})\n\nconst resetAvailablePlayerImages = state => ({\n  ...state,\n  availablePlayerImages: ArrayUtils.clone(state.playerImages)\n})\n\nconst showCurrentPlayerNotification = state => ({\n  ...state,\n  notify: {\n    message: `${getCurrentTurnPlayerName(state)}'s turn!`,\n    className: \"turn\"\n  }\n});\n\nexport const rootReducer = reducer\n","import { applyMiddleware, createStore } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { rootReducer, initialState } from \"./reducers\";\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport { init } from \"./actions\"\n\nconst middlewareEnhancer = applyMiddleware(thunkMiddleware)\nconst store = createStore(rootReducer, initialState, composeWithDevTools(middlewareEnhancer))\n\nstore.dispatch(init());\n\nexport default store\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nconst Notify = ({notify}) => (\n    notify.message == null ? \"<div/>\" : <div id=\"notify\" className={notify.className}>{notify.message}</div>\n);\n\nconst mapStateToProps = state => ({\n  notify: state.notify\n})\n\nexport default connect(mapStateToProps)(Notify);\n\n","import { connect } from \"react-redux\";\nimport Notify from \"./Notify\"\nimport {\n  updatePlayerName,\n  addHumanPlayer,\n  addComputerPlayer,\n  startGame\n} from \"../redux/actions\"\n\nconst Header = ({\n    addPlayerForm,\n    updatePlayerName,\n    addHumanPlayer,\n    addComputerPlayer,\n    startGame\n}) => (\n  <div className=\"header\">\n    <div className=\"title\">AMONG US</div>\n    <div className=\"gameControls\">\n      <div className=\"addHumanPlayer\">\n        <input id=\"playerName\" placeholder=\"Player Name\"\n               value={addPlayerForm.name}\n               onKeyUp={e => {\n                 if (e.code === 'Enter') {\n                   addHumanPlayer()\n                 }\n               }}\n               onChange={(e) => {\n                 updatePlayerName(e.target.value);\n               }}/>\n        <button id=\"addHumanPlayer\" onClick={() => addHumanPlayer()}>Add Human Player</button>\n      </div>\n      <button id=\"addComputerPlayer\" onClick={() => addComputerPlayer()}>Add Computer Player</button>\n      |\n      <button id=\"startButton\" onClick={() => startGame()}>Start!</button>\n    </div>\n    <Notify/>\n  </div>\n)\n\nconst mapStateToProps = state => ({\n  addPlayerForm: state.addPlayerForm\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n      updatePlayerName,\n      addHumanPlayer,\n      addComputerPlayer,\n      startGame,\n    }\n)(Header);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  isCurrentTurnPlayer,\n} from \"../selectors/selectors\"\nimport {\n  skipVote,\n  voteImposter\n} from \"../redux/actions\";\n\nconst Player = ({\n  celebrate,\n  player,\n  isCurrentTurn,\n  votingEnabled,\n  skipVote,\n  voteImposter\n}) => (\n    <div className={`player ${isCurrentTurn || celebrate ? \"turnHighlight\" : \"\"}`}>\n      <div>\n        <div className=\"imageContainer\">\n          <img src={`character-images/${player.image}.png`}/>\n        </div>\n        <div className=\"playerContent\">\n          <span className=\"playerName\">{player.name}</span>\n          <span className=\"status\">\n            {\n              isCurrentTurn ? \"'s turn!\" : \"\"\n            }\n          </span>\n          <div>\n            {\n              votingEnabled ?\n                  isCurrentTurn ?\n                      <button className=\"skipButton\"\n                              onClick={() => skipVote()}>Skip</button>\n                      :\n                      <button className=\"voteButton\"\n                              onClick={() => voteImposter(player.name)}>Vote</button>\n                  : null\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n);\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  celebrate: state.gameOver,\n  isCurrentTurn: isCurrentTurnPlayer(state, ownProps.player),\n  votingEnabled: state.emergencyMeetingStarted\n})\n\nexport default connect(mapStateToProps, {\n  skipVote,\n  voteImposter\n})(Player);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport {onTaskSelected} from \"../redux/actions\";\nimport {\n  getRoomForTask,\n  isCurrentTurnPlayerAbleToSelectTask,\n  isCurrentTurnPlayerHumanAndInRoom\n} from \"../selectors/selectors\";\n\nconst Task = ({\n  task,\n  currentTurnPlayerAbleToPerformTask,\n  isCurrentTurnPlayerHumanAndInRoom,\n  onTaskSelected\n}) => (\n  <div className={`task ${currentTurnPlayerAbleToPerformTask ? \"selectable\" : \"\"}`} onClick={(e) => {\n    if (currentTurnPlayerAbleToPerformTask) {\n      onTaskSelected(task.id)\n    }\n    e.stopPropagation() // otherwise it'll fire the room selection\n  }}>\n    <div className=\"description\">{\n      task.playerName ? `${task.playerName} is performing ${task.description}` :\n          task.completed && isCurrentTurnPlayerHumanAndInRoom ? `${task.description} completed` : task.description\n    }</div>\n  </div>\n);\n\nconst mapStateToProps = (state, ownProps) => ({\n  ...ownProps,\n  isCurrentTurnPlayerHumanAndInRoom: isCurrentTurnPlayerHumanAndInRoom(state, getRoomForTask(state, ownProps.task)),\n  currentTurnPlayerAbleToPerformTask: isCurrentTurnPlayerAbleToSelectTask(state, ownProps.task),\n})\n\nexport default connect(\n  mapStateToProps, {\n  onTaskSelected\n})(Task);\n\n","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport {\n  isEmergencyButtonEnabled\n} from \"../selectors/selectors\"\nimport {\n  onEmergencyMeetingSelected,\n} from \"../redux/actions\";\n\nconst EmergencyMeetingButton = ({\n  emergencyMeetingButtonEnabled,\n  emergencyMeetingStarted,\n  onEmergencyMeetingSelected,\n}) => (\n    <button disabled={!emergencyMeetingButtonEnabled}\n            onClick={() => {\n              if (!emergencyMeetingStarted) {\n                onEmergencyMeetingSelected()\n              }\n            }}\n            id=\"emergencyMeetingButton\">Emergency Meeting!</button>\n)\n\nconst mapStateToProps = state => ({\n  emergencyMeetingStarted: state.emergencyMeetingStarted,\n  emergencyMeetingButtonEnabled: isEmergencyButtonEnabled(state)\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n      onEmergencyMeetingSelected,\n    }\n)(EmergencyMeetingButton);\n","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport Player from \"./Player\";\nimport Task from \"./Task\"\nimport {\n  getTaskForRoom,\n  getPlayersInRoom,\n  isCurrentTurnPlayerAbleToSelectRoom,\n} from \"../selectors/selectors\"\nimport {\n  onRoomSelected,\n} from \"../redux/actions\";\nimport EmergencyMeetingButton from \"./EmergencyMeetingButton\";\n\nconst Room = ({\n                room,\n                players,\n                task,\n  currentTurnPlayerAbleToSelectRoom,\n  onRoomSelected\n}) => (\n  <div className=\"room\" onClick={() => {\n    if (currentTurnPlayerAbleToSelectRoom) {\n      onRoomSelected(room.name)\n    }\n  }}>\n    <div>\n      <div className=\"roomName\">{room.name}</div>\n      <div className=\"taskContainer\">\n        <Task task={task}/>\n      </div>\n      {\n        room.emergencyButton ? <EmergencyMeetingButton/> : null\n      }\n    </div>\n    <div className=\"players\">\n        {\n            getPlayersInRoom(players, room).map(player => <Player key={player.name} player={player}/>)\n        }\n    </div>\n  </div>\n)\n\nconst mapStateToProps = (state, ownProps) => ({\n  room: ownProps.room,\n  players: state.players,\n  task: getTaskForRoom(state, ownProps.room),\n  currentTurnPlayerAbleToSelectRoom: isCurrentTurnPlayerAbleToSelectRoom(state, ownProps.room),\n})\n\nexport default connect(\n    mapStateToProps,\n    {\n      onRoomSelected,\n    }\n)(Room);\n","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport Room from \"./Room\"\n\nconst Rooms = ({ rooms }) => (\n    <div>\n      { rooms.map(room => <Room key={room.name} room={room}/>) }\n    </div>\n)\n\nconst mapStateToProps = state => ({\n    rooms: state.rooms\n})\n\nexport default connect(mapStateToProps)(Rooms);\n","import '../amongus.css'\nimport Header from \"./Header\"\nimport Rooms from \"./Rooms\"\n\nfunction App() {\n  return (\n      <div className=\"App\">\n        <Header/>\n        <Rooms/>\n      </div>\n  );\n}\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Provider } from 'react-redux'\nimport store from './redux/store'\nimport App from './components/App'\n\nimport {\n  addComputerPlayer,\n  addHumanPlayer, enableComputerPlayers, onEmergencyMeetingSelected,\n  onRoomSelected,\n  onTaskSelected, skipVote,\n  startGame,\n  updatePlayerName, voteImposter\n} from \"./redux/actions\";\n\nconst rootElement = document.getElementById('root')\nReactDOM.render(\n    <Provider store={store}>\n        <App/>\n    </Provider>,\n    rootElement\n)\n\nconst steps = [\n  () => updatePlayerName(\"Jackson\"),\n  () => addHumanPlayer(),\n  () => updatePlayerName(\"Daddy\"),\n  () => addHumanPlayer(),\n  () => updatePlayerName(\"Foo\"),\n  () => addComputerPlayer(),\n  () => updatePlayerName(\"Baz\"),\n  () => addComputerPlayer(),\n  () => startGame(),\n  () => onTaskSelected(1), // Jackson\n  () => onRoomSelected(\"Reactor\"), // Daddy\n  () => onRoomSelected(\"Navigation\"), // Foo\n  () => onTaskSelected(3), // Baz\n  () => onEmergencyMeetingSelected(), // jackson\n  () => voteImposter(\"Foo\"), // Jackson\n  () => voteImposter(\"Foo\"), // Daddy\n  () => skipVote(), // Foo\n  () => voteImposter(\"Jackson\"), // Baz\n  () => enableComputerPlayers()\n]\nlet currentStepIndex = 0;\nlet runStep = () => {\n  console.log(steps[currentStepIndex])\n  store.dispatch(steps[currentStepIndex]());\n  currentStepIndex++;\n  if (currentStepIndex === steps.length) {\n    clearInterval(intervalId);\n  }\n}\n\nlet intervalId = setInterval(() => runStep(), 100)\n\n\n\n"],"sourceRoot":""}